"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[1299],{2376:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>c,default:()=>h,frontMatter:()=>i,metadata:()=>a,toc:()=>l});const a=JSON.parse('{"id":"understanding-openlm/architecture","title":"OpenLM Annapurna architecture","description":"Understand how OpenLM Annapurna uses microservices, Kubernetes, and messaging queues to process and manage license usage data.","source":"@site/docs/onpremise/understanding-openlm/architecture.md","sourceDirName":"understanding-openlm","slug":"/understanding-openlm/architecture","permalink":"/documentation/onpremise/understanding-openlm/architecture","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1747251694000,"sidebarPosition":2,"frontMatter":{"title":"OpenLM Annapurna architecture","sidebar_position":2,"description":"Understand how OpenLM Annapurna uses microservices, Kubernetes, and messaging queues to process and manage license usage data."},"sidebar":"tutorialSidebar","previous":{"title":"About OpenLM Annapurna","permalink":"/documentation/onpremise/understanding-openlm/intro"},"next":{"title":"On-premise deployment requirements","permalink":"/documentation/onpremise/understanding-openlm/system-requirements"}}');var r=s(4848),t=s(8453);const i={title:"OpenLM Annapurna architecture",sidebar_position:2,description:"Understand how OpenLM Annapurna uses microservices, Kubernetes, and messaging queues to process and manage license usage data."},c="OpenLM Annapurna architecture",d={},l=[{value:"Key components",id:"key-components",level:2},{value:"Microservices and Kubernetes",id:"microservices-and-kubernetes",level:2},{value:"Architecture levels",id:"architecture-levels",level:2},{value:"Level 1: High-level data flow",id:"level-1-high-level-data-flow",level:3},{value:"Level 2: Detailed data pipeline",id:"level-2-detailed-data-pipeline",level:3},{value:"Enrichment services",id:"enrichment-services",level:2},{value:"Data storage and recovery",id:"data-storage-and-recovery",level:2}];function o(e){const n={br:"br",h1:"h1",h2:"h2",h3:"h3",header:"header",img:"img",li:"li",p:"p",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"openlm-annapurna-architecture",children:"OpenLM Annapurna architecture"})}),"\n",(0,r.jsx)(n.p,{children:"OpenLM Annapurna collects application and executable data through Workstation Agents and Brokers. These components connect to OpenLM Gateway, which represents the organization\u2019s fully qualified domain name (FQDN) or DNS name. The gateway forwards the data to OpenLM services, which stores it in appropriate databases."}),"\n",(0,r.jsx)(n.h2,{id:"key-components",children:"Key components"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Workstation Agents"}),": Collect data from individual user machines."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Brokers"}),": Run on license manager servers. They collect license usage data and send it to relevant services."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"OpenLM Gateway"}),": Serves as entry point and routes data to individual services."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"OpenLM Services"}),": Process, enrich, and manage the collected data."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Databases"}),": Store processed data in dedicated systems, such as the server database, identity service database, DSS database, and reporting database."]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"microservices-and-kubernetes",children:"Microservices and Kubernetes"}),"\n",(0,r.jsxs)(n.p,{children:["OpenLM Annapurna runs on microservices deployed in a Kubernetes cluster.",(0,r.jsx)(n.br,{}),"\n","Each service runs inside a container within a pod on a Kubernetes node.",(0,r.jsx)(n.br,{}),"\n","Services store their data in internal databases and use Kafka as a message queue for asynchronous processing."]}),"\n",(0,r.jsx)(n.h2,{id:"architecture-levels",children:"Architecture levels"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"High-level architecture of OpenLM Annapurna",src:s(4297).A+"",width:"2560",height:"1446"})}),"\n",(0,r.jsx)(n.h3,{id:"level-1-high-level-data-flow",children:"Level 1: High-level data flow"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Workstation Agents, Brokers, and other services write data to their own databases."}),"\n",(0,r.jsx)(n.li,{children:"Services publish data to Kafka topics."}),"\n",(0,r.jsx)(n.li,{children:"The Reporting Service aggregates Kafka data."}),"\n",(0,r.jsx)(n.li,{children:"The Reporting Service stores data in the reporting database."}),"\n",(0,r.jsx)(n.li,{children:"The reporting dashboard reads data from the reporting database."}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"OpenLM Annapurna Level 1 architecture",src:s(3554).A+"",width:"2560",height:"1444"})}),"\n",(0,r.jsx)(n.h3,{id:"level-2-detailed-data-pipeline",children:"Level 2: Detailed data pipeline"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Workstation Agents and Brokers collect data from PCs and servers."}),"\n",(0,r.jsx)(n.li,{children:"Agent Hub and Broker Hub consolidate this data."}),"\n",(0,r.jsx)(n.li,{children:"Data from Agent Hub and Broker Hub is saved to MongoDB and Kafka."}),"\n",(0,r.jsx)(n.li,{children:"Other services (User, Project, Server) consume relevant Kafka topics."}),"\n",(0,r.jsx)(n.li,{children:"The Enrichment Service merges and enhances data from all services, then publishes it back to Kafka."}),"\n",(0,r.jsx)(n.li,{children:"Apache Spark aggregates the enriched Kafka data for reporting."}),"\n",(0,r.jsx)(n.li,{children:"Spark writes results to the reporting database."}),"\n",(0,r.jsx)(n.li,{children:"Business intelligence tools access the reporting database."}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"OpenLM Annapurna Level 2 architecture",src:s(4265).A+"",width:"2560",height:"1440"})}),"\n",(0,r.jsx)(n.h2,{id:"enrichment-services",children:"Enrichment services"}),"\n",(0,r.jsx)(n.p,{children:"Annapurna includes enrichment services to consolidate and enhance the collected data:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Allocation Enrichment Service"}),": Adds allocation data using allocation IDs."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Usage Enrichment Service"}),": Enhances usage data using session IDs."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Denials Enrichment Service"}),": Processes denial data using denial IDs."]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"data-storage-and-recovery",children:"Data storage and recovery"}),"\n",(0,r.jsxs)(n.p,{children:["Annapurna uses a staging database to support data recovery in case of loss or corruption.",(0,r.jsx)(n.br,{}),"\n","This staging data is later moved to MongoDB, which serves as an internal recovery source."]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(o,{...e})}):o(e)}},3554:(e,n,s)=>{s.d(n,{A:()=>a});const a=s.p+"assets/images/level-1-d9e12812c8bb899b6b91021af33d44cc.png"},4265:(e,n,s)=>{s.d(n,{A:()=>a});const a=s.p+"assets/images/level-2-907a4256ba186abd991a397e2bd9ffa3.png"},4297:(e,n,s)=>{s.d(n,{A:()=>a});const a=s.p+"assets/images/high-level-4361077f34b8b6d4a39526e79e536cb7.png"},8453:(e,n,s)=>{s.d(n,{R:()=>i,x:()=>c});var a=s(6540);const r={},t=a.createContext(r);function i(e){const n=a.useContext(t);return a.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),a.createElement(t.Provider,{value:n},e.children)}}}]);